<body>
    <h1><%= title %></h1>
    <p>Tu selecci贸n de canciones.</p>

    <style type="text/css">
        #genreInput {
            width: 100%;
        }

        #searchSongs {
            width: 30%;
        }

        paper-button[active] {
            background-color: green;
            color: white;
        }       

        .footer{
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        body{
            padding-bottom: 70px;
        }

        .darkPlayer{
            background-color: darkgray;
        }

    </style>

    <!-- <button class="btn btn-primary" id="searchSongs">Buscar</button> -->

    <br/>

    <table class="table">
        <thead> 
            <tr>
                <th>#</th> 
                <th>Nombre</th> 
                <th>Descripci贸n</th>
                <th>Duraci贸n</th>
                <th>Acci贸n</th> 
            </tr> 
        </thead>
        <tbody id="songList"> 
        </tbody>
    </table>


    
    <script type="text/javascript">
        $('document').ready( function(){
            $('#searchSongs').click(function() {
                var songListSelector = "#songList";
                var genreValue = $("#genreInput").val();
                if(!genreValue || genreValue == ""){
                    genreValue = "any";
                }

                
                var ajaxUrl = "/api/songs/genre/" + genreValue;


                $(songListSelector).html("");

                $.getJSON( ajaxUrl , function( data ) {
                    var i = 1;
                    data.forEach( function(song){
                        console.log("Cancion: ");
                        console.log(song);

                        /*$('<audio controls="controls"><source src="/songs/' + song.fileName + '" type="audio/mpeg">Tu Browser no soporta el elemento "audio" de HTML5.</audio>')
                                .appendTo( $(songListSelector) );*/

                        // $('<div class="row"> <br/> <paper-card heading="' + song.name + '" >  <div class="card-content"> <p>'+ song.description +'</p>  <audio controls="controls"><source src="/songs/' + song.fileName + '" type="audio/mpeg">Tu Browser no soporta el elemento "audio" de HTML5.</audio> </div>  <div class="card-actions"> <paper-button toggles><iron-icon icon="check"></iron-icon>Like</paper-button></div></paper-card></div>').appendTo( $(songListSelector) );

                        $('<tr><th scope="row">' + i + '</th> <td>' + song.name + '</td> <td>' + song.description + '</td><td>' + song.duration + '</td> <td> <paper-icon-button class="playSong" data-songurl="/songs/' + song.fileName + '" icon="icons:send" title="play" style="color:darkcyan"></paper-icon-button> </td> </tr>').appendTo($(songListSelector));
                    } );
                });            
            });
        } );
    </script>
    <script type="text/javascript" src="/custom/CustomStyleJs/AudioPlayer.js"></script>
    <script type="text/javascript" src="/custom/CustomStyleJs/MusicSearch.js"></script>
</body>
